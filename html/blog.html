<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Smiley Cyber blog and portfolio about cybersecurity, hacking, and programming. Join for tutorials, projects, and fun!">
    <title>Smiley Cyber - Blog</title>
    <link rel="stylesheet" href="../assets/styles/main.css">
</head>
<body>
    <header class="header">
        <nav class="header__menu">
            <ul>
                <li><img src="imgs/cropped-original-logo-symbol.png" width="50" height="50" alt="Smiley Cyber Logo"></li>
                <li><a class="header__menu-link" href="../index.html">Home</a></li>
                <li><a class="header__menu-link" href="blog.html">Learning</a></li>
                <li><a class="header__menu-link" href="about.html">About</a></li>
                <li><a class="header__menu-link" href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="blog-wrapper">
            <h1>Latest Blog Posts</h1>
            <div id="blog-posts">
                <!-- Blog posts will be dynamically inserted here -->
            </div>
        </section>
    </main>

    <script>
        // Function to fetch and display the Substack RSS feed
        async function fetchSubstackPosts() {
            const rssUrl = 'https://api.allorigins.win/raw?url=https://logansmylie.substack.com/feed'; // Use the AllOrigins proxy to fetch the RSS feed
            try {
                const response = await fetch(rssUrl);
                const data = await response.json();

                // Parse the feed and sort posts by the publication date (newest first)
                const posts = data.items.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));

                // Get the container for blog posts
                const blogContainer = document.getElementById('blog-posts');
                blogContainer.innerHTML = ''; // Clear the container before adding posts

                // Loop through the sorted posts and display them
                posts.forEach(post => {
                    const title = post.title;
                    const link = post.link;
                    const description = post.description;

                    const postElement = document.createElement('div');
                    postElement.classList.add('blog-post');
                    
                    postElement.innerHTML = `
                        <h2><a href="${link}" target="_blank">${title}</a></h2>
                        <p>${description}</p>
                        <a href="${link}" target="_blank">Read More</a>
                    `;
                    
                    blogContainer.appendChild(postElement);
                });
            } catch (error) {
                console.error('Error fetching or parsing the RSS feed:', error);
            }
        }

        // Call the function to load posts when the page loads
        window.onload = fetchSubstackPosts;
    </script>
</body>
</html>
